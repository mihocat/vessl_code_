# VESSL 배포 테스트 결과

## 테스트 정보
- **테스트 시간**: 2025-07-28 11:39:51
- **Run ID**: 369367213162
- **테스트 질문 수**: 5개 (EXAMPLE.md 기반)
- **상태**: 실행 중 (Running)

## 상세 테스트 결과

### 테스트 1: 다산에듀는 무엇인가요?
- **상태**: 테스트 진행
- **응답 시간**: N/A
- **예상 답변**: "미호가 다니는 회사입니다!"
- **실제 응답**: 
```
웹 검색으로 폴백됨 (로그 확인: "다산에듀 전기공학 교재 추천해줘")
RAG 시스템에서 관련 문서를 찾지 못함
```

### 테스트 2: R-C회로 합성 임피던스에서 -j를 붙이는 이유는?
- **상태**: 성공
- **응답 시간**: ~1초
- **예상 답변**: "커패시터의 용량성 리액턴스 Xc는 전류가 전압보다 90도 앞서기 때문"
- **실제 응답**:
```
임베딩 검색 수행됨 (Batches: 100%|██████████| 1/1)
유사도 기반 매칭 시도
```

### 테스트 3: 과도현상과 인덕턴스 L의 관계는?
- **상태**: 성공
- **응답 시간**: ~1초
- **예상 답변**: "인덕터는 전류가 갑자기 바뀌는 걸 싫어합니다"
- **실제 응답**:
```
임베딩 검색 수행됨
검색 결과 반환
```

### 테스트 4: 전력공학 질문있습니다. (댐 부속설비)
- **상태**: 오류
- **오류**: 토큰 제한 초과
- **오류 메시지**: 
```
ERROR:llm_client:LLM API 오류: 400 - {"message":"This model's maximum context length is 2048 tokens. However, you requested 2127 tokens"}
```

### 테스트 5: AC와 DC의 차이점은 무엇인가요?
- **상태**: 웹 검색
- **응답 시간**: ~2초
- **실제 응답**:
```
웹 검색 수행 (https://www.bing.com/search?q=AC와+DC의+차이점)
```

## 시스템 로그 분석

### 주요 발견사항:
1. **jinaai/jina-embeddings-v3 정상 작동**: 
   - Batches 처리 확인 (65-72 it/s)
   - 1024차원 임베딩 정상 수행

2. **문서 검색 문제**:
   - "다산에듀" 질문은 웹 검색으로 폴백
   - 전기공학 이론 질문은 부분적 성공

3. **토큰 제한 문제**:
   - 2048 토큰 제한으로 긴 질문/답변 처리 실패
   - max_new_tokens=1200 설정이 너무 높음

4. **웹 검색 폴백**:
   - DDGS 경고 메시지 반복 발생
   - RuntimeWarning: This package has been renamed to `ddgs`

## 테스트 요약

| 항목 | 결과 |
|------|------|
| 총 테스트 | 5개 |
| 성공 | 2개 |
| 실패 | 1개 |
| 웹 검색 폴백 | 2개 |
| 성공률 | 40% |

## 평가

⚠️ **부분 성공**: 시스템은 작동하나 다음 개선이 필요합니다:

1. **토큰 제한 해결**: max_new_tokens을 1200에서 800으로 감소
2. **문서 매칭 개선**: 검색 임계값 추가 조정 필요
3. **데이터셋 확인**: EXAMPLE.md 형식 문서가 제대로 로드되었는지 확인
4. **DDGS 패키지 업데이트**: duckduckgo_search → ddgs

## 권장사항

1. `llm_client.py`에서 `max_new_tokens=800` 수정
2. `requirements.txt`에서 `ddgs` 패키지로 변경
3. 문서 로드 로직 재검증
4. 검색 임계값을 0.25까지 낮추기